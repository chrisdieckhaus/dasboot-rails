<div class="space"></div>

<h1><%= @user.first_name %> <%= @user.last_name %>'s Schedule</h1>

<table class="table">
    <tr>
		<th>Date</th>
		<th>Start Time</th>
		<th>End Time</th>
		<th></th>
		<th></th>
	</tr>
	<% @user.shifts.sort_by{|s| s.start_time }.each do |shift| %>
		<tr class="<%= 'night-shift' if shift.night_shift? %>">
			<td>
				<% if shift.night_shift? %>
					<% if shift.weekend_night? %>
						<%= shift.start_time.yesterday.strftime('%A night (%-m/%-d)') %>*
					<% else %>
						<%= shift.start_time.strftime('%A night (%-m/%-d)') %>
					<% end %>
				<% else %>
					<%= shift.start_time.strftime('%A %-m/%-d') %>
				<% end %>
			</td>
			<td>
				<%= shift.start_time.strftime('%l:%M%P') %>
			</td>
			<td>
				<%= shift.end_time.strftime('%l:%M%P') %>
			</td>
		<% if current_user.role == "admin" %>
			<td>
				<%= link_to "Edit", edit_shift_path(shift) %>
			</td>
			<td>
				<%= button_to 'x', shift_path(shift), method: :delete %>
			</td>
		<% end %>
		</tr>
	<% end %>
</table>

<br>

<h1><%= @user.first_name %> <%= @user.last_name %>'s Availability</h1>

These are the times <%= @user.first_name %> is <strong>not</strong> available.

<table class="table">
    <tr>
		<th>Date</th>
		<th>Times</th>
		<th></th>
		<th></th>
	</tr>
	<% @user.availabilities.sort_by{|a| a.start_time }.each do |av| %>
		<%= render "/availabilities/av_table", av: av %>
	<% end %>
</table>
